import { AUTHORIZATION_FORM } from '@orchesty/nodejs-sdk/dist/lib/Application/Base/AApplication';
import { ApplicationInstall } from '@orchesty/nodejs-sdk/dist/lib/Application/Database/ApplicationInstall';
import Field from '@orchesty/nodejs-sdk/dist/lib/Application/Model/Form/Field';
import FieldType from '@orchesty/nodejs-sdk/dist/lib/Application/Model/Form/FieldType';
import Form from '@orchesty/nodejs-sdk/dist/lib/Application/Model/Form/Form';
import FormStack from '@orchesty/nodejs-sdk/dist/lib/Application/Model/Form/FormStack';
import { ABasicApplication } from '@orchesty/nodejs-sdk/dist/lib/Authorization/Type/Basic/ABasicApplication';
import { CLIENT_ID, CLIENT_SECRET } from '@orchesty/nodejs-sdk/dist/lib/Authorization/Type/OAuth2/IOAuth2Application';
import CurlSender from '@orchesty/nodejs-sdk/dist/lib/Transport/Curl/CurlSender';
import RequestDto from '@orchesty/nodejs-sdk/dist/lib/Transport/Curl/RequestDto';
import { HttpMethods } from '@orchesty/nodejs-sdk/dist/lib/Transport/HttpMethods';
import AProcessDto from '@orchesty/nodejs-sdk/dist/lib/Utils/AProcessDto';
import { encode } from '@orchesty/nodejs-sdk/dist/lib/Utils/Base64';
import { CommonHeaders, JSON_TYPE } from '@orchesty/nodejs-sdk/dist/lib/Utils/Headers';

export const BASE_URL = 'https://api-m.paypal.com';

export const NAME = 'paypal';
export default class PaypalApplication extends ABasicApplication {

    public constructor(private readonly sender: CurlSender) {
        super();
    }

    public getName(): string {
        return NAME;
    }

    public getPublicName(): string {
        return 'Paypal';
    }

    public getDescription(): string {
        return 'One of the most used payment methods for secure online payments and also a wallet';
    }

    public getLogo(): string {
        return 'data:image/png;base64,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AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAt8E2AAPxbTHHBmVPMAAAAASUVORK5CYII=';
    }

    public getFormStack(): FormStack {
        const form = new Form(AUTHORIZATION_FORM, 'Authorization settings')
            .addField(new Field(FieldType.TEXT, CLIENT_ID, 'Client Id', null, true))
            .addField(new Field(FieldType.TEXT, CLIENT_SECRET, 'Client Secret', null, true));

        return new FormStack().addForm(form);
    }

    public async getRequestDto(
        dto: AProcessDto,
        applicationInstall: ApplicationInstall,
        method: HttpMethods,
        _url?: string,
        data?: unknown,
    ): Promise<RequestDto> {
        const url = `${BASE_URL}/${_url}`;
        const request = new RequestDto(url, method, dto);
        request.setHeaders({
            [CommonHeaders.CONTENT_TYPE]: JSON_TYPE,
            [CommonHeaders.ACCEPT]: JSON_TYPE,
            [CommonHeaders.AUTHORIZATION]: `Bearer ${await this.getAuthorizationCode(applicationInstall, dto)}`,
        });

        if (data) {
            request.setJsonBody(data);
        }

        return request;
    }

    private async getAuthorizationCode(appInstall: ApplicationInstall, dto: AProcessDto): Promise<string> {
        const clientId = appInstall.getSettings()[AUTHORIZATION_FORM][CLIENT_ID];
        const clientSecret = appInstall.getSettings()[AUTHORIZATION_FORM][CLIENT_SECRET];
        const req = new RequestDto(
            `${BASE_URL}/v1/oauth2/token`,
            HttpMethods.POST,
            dto,
            'grant_type=client_credentials',
            {
                [CommonHeaders.AUTHORIZATION]: encode(`${clientId}:${clientSecret}`),
                [CommonHeaders.CONTENT_TYPE]: 'application/x-www-form-urlencoded',
            },
        );

        const resp = await this.sender.send<ITokenResponse>(req);

        return resp.getJsonBody().access_token;
    }

}

/* eslint-disable @typescript-eslint/naming-convention */

interface ITokenResponse {
    scope: string;
    access_token: string;
    token_type: string;
    app_id: string;
    expires_in: number;
    nonce: string;
}

/* eslint-enable @typescript-eslint/naming-convention */
