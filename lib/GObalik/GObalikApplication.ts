import CoreFormsEnum from '@orchesty/nodejs-sdk/dist/lib/Application/Base/CoreFormsEnum';
import { ApplicationInstall } from '@orchesty/nodejs-sdk/dist/lib/Application/Database/ApplicationInstall';
import Field from '@orchesty/nodejs-sdk/dist/lib/Application/Model/Form/Field';
import FieldType from '@orchesty/nodejs-sdk/dist/lib/Application/Model/Form/FieldType';
import Form from '@orchesty/nodejs-sdk/dist/lib/Application/Model/Form/Form';
import FormStack from '@orchesty/nodejs-sdk/dist/lib/Application/Model/Form/FormStack';
import { ABasicApplication } from '@orchesty/nodejs-sdk/dist/lib/Authorization/Type/Basic/ABasicApplication';
import RequestDto from '@orchesty/nodejs-sdk/dist/lib/Transport/Curl/RequestDto';
import { HttpMethods } from '@orchesty/nodejs-sdk/dist/lib/Transport/HttpMethods';
import AProcessDto from '@orchesty/nodejs-sdk/dist/lib/Utils/AProcessDto';
import { encode } from '@orchesty/nodejs-sdk/dist/lib/Utils/Base64';
import { CommonHeaders, JSON_TYPE } from '@orchesty/nodejs-sdk/dist/lib/Utils/Headers';

export const NAME = 'go-balik';
export const USER = 'user';
export const PASSWORD = 'password';

export default class GObalikApplication extends ABasicApplication {

    public getName(): string {
        return NAME;
    }

    public getPublicName(): string {
        return 'GO balik';
    }

    public getDescription(): string {
        return 'Transport service for parcels and pallets not only in the Czech Republic, but also export and import from neighbouring countries';
    }

    public getLogo(): string {
        return 'data:image/svg+xml;base64,PHN2ZyBpZD0iVnJzdHZhXzEiIGRhdGEtbmFtZT0iVnJzdHZhIDEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDk5Ljc4IDg1LjgxIj48ZGVmcz48c3R5bGU+LmNscy0xe2ZpbGw6I2ZjZDAzNDt9LmNscy0ye2ZpbGw6IzAwMDUwYjt9PC9zdHlsZT48L2RlZnM+PHBhdGggY2xhc3M9ImNscy0xIiBkPSJNMS41NCw1NC43MUMtLjg4LDQ3LjA5LjA2LDM5LjU3LDIuNjIsMzIuMjIsNiwyMi40MSwxMS42LDE0LjE0LDIwLjgzLDguN0EyMS40LDIxLjQsMCwwLDEsMjkuNDksNmMxLjkzLS4yLDMuOSwwLDUsMmE4LDgsMCwwLDEsLjM1LDcuMDksMS41NiwxLjU2LDAsMCwxLTEuODQsMWMtMS0uMTktMS4yMy0xLjA5LTEuNDktMS44OC0xLjExLTMuNS0xLjkxLTMuODktNS40OS0yLjQ0YTI1LjIzLDI1LjIzLDAsMCwwLTkuNzYsNy42N0M5Ljc0LDI3LjMzLDUuNjMsMzYuMjEsNS42Nyw0Ni41OWMwLDMuMDguMDgsNi41OCwzLjQsOC4xN3M2LjczLjc0LDkuNjktMS4zN0EyMy43MSwyMy43MSwwLDAsMCwyMi41OCw1MGM1LTUuNTIsOC4xMS0xMi4xOSwxMS43My0xOS4yOC00Ljg4LDEuNTctOS4xOCwzLTEzLjUsNC4zM1MxNSwzNi4wOSwxNC4zNCwzMy43MmMtLjU4LTIsLjgtMy4zLDQuODctNC4zOFEyNy44OCwyNywzNi42MSwyNWM1LjM4LTEuMjksNi4xMy0uMzgsNS41Miw0Ljk1LS40OSw0LjMxLS4zOCw4LjY4LS40NSwxMy0uMDYsNC4xNiwwLDguMzIsMCwxMi40OGE4LjY2LDguNjYsMCwwLDAsMSw0LjM2YzEuMSwyLC4xNywzLjQxLTIuMiwzLjUxLTIuNzYuMTItNC40Ni0xLjcyLTQuNTEtNS0uMTEtNi44MS4xMi0xMy42MS41My0yMC42Mi0xLjE0LjY3LTEuMjQsMS43Ni0xLjYzLDIuNmE1Ny45LDU3LjksMCwwLDEtOS40NywxNC43NkMyMCw2MC45MywxMi42NCw2Mi43NCw1LjcsNTkuODljLS41OS0uMjctLjY5LS44MS0uODEtMS4zNUM1LDU2LjIxLDMuNDQsNTUuMzEsMS41NCw1NC43MVoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0wLjE0IC01Ljk3KSIvPjxwYXRoIGQ9Ik04MS43NSw3MS4yYy43NiwxLjMxLjI2LDIuNzkuNjIsNC4zNiwyLjc0LTIuMDksNS4xOC00LjQ3LDguMTItNi4xN2ExMi42NSwxMi42NSwwLDAsMSw2LjEzLTIuMSwzLjE1LDMuMTUsMCwwLDEsMy4xNCwxLjU4Yy40NC45LS4xNCwxLjY3LS42NywyLjMxLS44MiwxLTEuNzQsMS43Mi0zLjE1LjcxLS44LS41OC0xLjYyLjA2LTIuMzUuNDZhNTYuMSw1Ni4xLDAsMCwwLTExLDguMjFjNS4yMywyLDkuNyw1LjEyLDE1LjI1LDUuNDEuNjksMCwxLjQyLjA2LDEuNjQuODNhMS43NiwxLjc2LDAsMCwxLS43NiwyLDUuOTIsNS45MiwwLDAsMS00Ljg5Ljg4Yy0yLjczLS41OS01LjEyLTItNy42My0zLjEtLjkyLS40MS0xLjcxLTEuMjMtMi44My0xLjA3LDAsMS4zNCwwLDIuNjUsMCw0YTIuMTEsMi4xMSwwLDAsMS0yLjI5LDIuMzNjLTEuNCwwLTEuNTYtLjkxLTEuODYtMi0uNzItMi42Ni4xNS01LjY3LTIuMDYtOC0uOTMtMSwuNzgtMi4xNi42Ni0zLjQ1LS4xNi0xLjc4LS4wNy0zLjU4LS4wOS01LjM3YTE4LjM5LDE4LjM5LDAsMCwwLS4xNi03LjI0LDIwLjE1LDIwLjE1LDAsMCwxLS4yOC03Ljg1Yy4xNi0xLjQ0LDEtMi41NiwyLjYzLTIuMzlzMS43MSwxLjQ5LDEuNjksMi43OGMwLDEuNTEsMCwzLDAsNC41M0M4MS4zMyw2NS41Niw4MSw2OC4zOSw4MS43NSw3MS4yWiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTAuMTQgLTUuOTcpIi8+PHBhdGggZD0iTTU0Ljg3LDU4Ljc2YTEwLjgyLDEwLjgyLDAsMCwxLC41OS0yLjE1LDIuMjYsMi4yNiwwLDAsMSwyLjM1LTEuMjdjMS4yOC4xMiwxLjQ0LDEuMTYsMS40NywyLjA4YTE0LjUzLDE0LjUzLDAsMCwxLS40NSw1LjI5Yy0uNjcsMi4yNS0uMzcsNC41Mi0uMTYsNi43OEw1OC4yOCw3N2MtLjcxLTEuMjItLjIzLTIuNDctLjM3LTMuNzEuMjQsMy40NC0uNDUsNi44OC4zMywxMC4zMS40MSwxLjE1Ljc2LDIuMzIsMS4yNCwzLjQ0YTEuNzUsMS43NSwwLDAsMS0xLjE2LDIuNjZjLTEuMjguNDYtMi41MS41Mi0zLjExLTFhOC44Myw4LjgzLDAsMCwxLS44MS0zQTExOS4zNCwxMTkuMzQsMCwwLDEsNTQuNyw3MEM1NS40Miw2Ni4yNCw1NS4wNiw2Mi41LDU0Ljg3LDU4Ljc2WiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTAuMTQgLTUuOTcpIi8+PHBhdGggZD0iTTczLjc0LDU5LjhhNC43Miw0LjcyLDAsMCwxLTEuNTYsMi40NUEyMy40NiwyMy40NiwwLDAsMSw2Nyw2Ni42MmEyLDIsMCwwLDEtMi44Mi0uMzhjLS43Ny0xLS4xMi0xLjc5LjU2LTIuNDVhMjguNywyOC43LDAsMCwwLDUtNS43M2MuNS0uODQsMS4yOC0xLjQ0LDIuMzctLjgyQTIuNiwyLjYsMCwwLDEsNzMuNzQsNTkuOFoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0wLjE0IC01Ljk3KSIvPjxwYXRoIGQ9Ik01NC44Nyw1OC43NmMxLDMuOS4zOCw3Ljg0LjMsMTEuNzgtLjA3LDAtLjE4LDAtLjIxLS4wN2E0Ljc0LDQuNzQsMCwwLDEtLjI2LS41QzU0Ljc2LDY2LjIzLDU0LjgxLDYyLjQ5LDU0Ljg3LDU4Ljc2WiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTAuMTQgLTUuOTcpIi8+PHBhdGggZD0iTTU4LjI0LDgzLjY0Yy0xLjI1LS4zMS0uNTUtMS4zMS0uNTctMS45MkE1Ni44MSw1Ni44MSwwLDAsMSw1OCw3M0w1OC4yOCw3N0M1OC4yNyw3OS4yNCw1OC4yNSw4MS40NCw1OC4yNCw4My42NFoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0wLjE0IC01Ljk3KSIvPjxwYXRoIGQ9Ik00My44Miw3OS4xOGExNSwxNSwwLDAsMSwuMTUsOUM0My40Nyw4NS4yMiw0My45LDgyLjIsNDMuODIsNzkuMThaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMC4xNCAtNS45NykiLz48cGF0aCBkPSJNODEuNzUsNzEuMmMtMS4xOS0yLjgtLjg1LTUuNjMtLjE2LTguNDdaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMC4xNCAtNS45NykiLz48cGF0aCBkPSJNNzcuNTgsNjUuNjZjMS4yMSwyLjM5Ljg0LDQuODEuMTYsNy4yNFE3Ny42Niw2OS4yNyw3Ny41OCw2NS42NloiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0wLjE0IC01Ljk3KSIvPjxwYXRoIGQ9Ik00Ny40LDc3Ljg5bC0uMzQsMi40Yy0uMDUtMi4yOC0uODgtNC41OC4yLTYuNzhBMTQuMzEsMTQuMzEsMCwwLDEsNDcuNCw3Ny44OVoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0wLjE0IC01Ljk3KSIvPjxwYXRoIGQ9Ik01OC42Nyw2OS40OWE5LDksMCwwLDEsLjE2LTYuNzhaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMC4xNCAtNS45NykiLz48cGF0aCBjbGFzcz0iY2xzLTIiIGQ9Ik0xLjUsNTguNzRBNy40OCw3LjQ4LDAsMCwxLDEuNjMsNjVaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMC4xNCAtNS45NykiLz48cGF0aCBkPSJNNjUuNzUsNjljMi4wNy0xLjQ5LDIuODEtMS4yNiwzLjc4LDEuMTRhNjEuNjgsNjEuNjgsMCwwLDAsLjE1LDEyLjQ1Yy4zNiwyLjEuNzYsNC4xOSwxLjA4LDYuM0ExLjg4LDEuODgsMCwwLDEsNjksOTEuMjNhMS43OSwxLjc5LDAsMCwxLTIuMTYtMS43MWMtLjIyLTEuNTYtLjgxLTMuMDktLjUtNC43MS40Mi0xLjM4LjExLTIuOC4xOC00LjIsMC0uMzctLjEyLS41OS0uMDktLjIyLDAsMC0uMTcsMC0uMjcsMGE5LjQxLDkuNDEsMCwwLDEtLjQtMy41N0EzMi41NCwzMi41NCwwLDAsMCw2NS43NSw2OVoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0wLjE0IC01Ljk3KSIvPjxwYXRoIGQ9Ik02OS42OCw4Mi41N2EzMCwzMCwwLDAsMS0uMTUtMTIuNDVaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMC4xNCAtNS45NykiLz48cGF0aCBkPSJNNjUuNzUsNjlhMTQsMTQsMCwwLDEsMCw3Ljg5QTQxLjYsNDEuNiwwLDAsMSw2NS43NSw2OVoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0wLjE0IC01Ljk3KSIvPjxwYXRoIGQ9Ik02Ni4xMyw4MC40NGMuMi0uMTguNTUtLjc5LjU1LS41MSwwLDEuNjMuNjEsMy4zMy0uMzcsNC44OFoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0wLjE0IC01Ljk3KSIvPjxwYXRoIGNsYXNzPSJjbHMtMSIgZD0iTTc4LjgyLDEyLjU4YTU3LjM1LDU3LjM1LDAsMCwwLTcuNTYtMS4zNywzLjY2LDMuNjYsMCwwLDEtMi4wOC0uNjhjLTIuMzQtMS45NS00LjQyLTEuOS02LjQ4LjJDNTYuMDYsMTcuNTEsNTEuMywyNS4zLDQ5Ljc3LDM0LjgxczQuNjEsMTYuNTQsMTQuMzIsMTYuNTZjMTEuMjEsMCwyMy0xMC4zOSwyNS4xMy0yMi4yNEM5MC43MSwyMC45NCw4Ni45MiwxNSw3OC44MiwxMi41OFptNS4wNiwxNy43OEM4MS43LDM4LjYsNzIuNzQsNDUuNjUsNjQuNCw0NS42OWMtNi4xMywwLTkuMDgtMi43MS04LjkzLTguNzQuMTktOCwzLjkzLTE0LjYxLDkuMTEtMjAuNTEuMzUtLjM5LjY3LS45NCwxLjM2LS4zNCwyLjIxLDEuOTMsNC44OSwxLjE1LDcuMzksMS4xQzgxLjgzLDE3LDg2LDIyLjIzLDgzLjg4LDMwLjM2WiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTAuMTQgLTUuOTcpIi8+PHBhdGggZD0iTTIxLjI1LDY3LjU3Yy0yLjE0LTEuNTUtNS42LS42OS05LDIuMTUtMi40MSwyLTQuMDYsNC42LTYuMDgsNy4yNy0uMjEtMS4yMy0uMzYtMi4xNC0uNTEtM2EuODQuODQsMCwwLDEtLjEzLjI1Yy0uMS4xMi4wNi0uMzktLjA2LS4yOCwwLS4zMywwLC4xNiwwLS4xNi4yOC01LjEsMC0xMi4wOS4wNy0xNS41NC0uMDktMi41My0uODktNC4yNy0zLjk1LTMuNS0uODEsMS4zNC0uNTksMi4xNS0uMjYsMy42NC4wOS40OS4zNCw0LjQ0LjM1LDYuNiwwLDIuNDgtLjIxLDUsLjQxLDcuNDIuMTMsMi4xOC4yNCwyLC4zMSw0LC4xMiwzLjQuOTMsNi44My0uMTIsMTAuMTgtLjA3LDIuNDMsMi41MiwxLjc2LDMuNDEsMi44NywxLjUyLDEuOTEsMywxLjM0LDQuNDkuMzdhMzEsMzEsMCwwLDAsMTEuNTctMTNDMjMuNTEsNzIuNzYsMjMuMjksNjkuMDUsMjEuMjUsNjcuNTdabS0zLjM4LDhBMTkuOSwxOS45LDAsMCwxLDYuNzcsODYuMDljMS43NS02LjA4LDQuMTctMTEsOS4xNy0xNC41NmEyLjEyLDIuMTIsMCwwLDEsMi4yNC0uMkMxOS43MSw3Mi4xNywxOC41LDc0LjIsMTcuODcsNzUuNTZaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMC4xNCAtNS45NykiLz48cGF0aCBkPSJNNS42NSw3NC4yYzAtNC42NC4xOC05LjIzLjIzLTEzLjg3YTQuMjYsNC4yNiwwLDAsMC0uMTEtMWwtLjMtMS4yMmgwQzQuODgsNjMuNDksNC40LDc1Ljc3LDUuNjUsNzQuMloiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0wLjE0IC01Ljk3KSIvPjxwYXRoIGQ9Ik0xLjc1LDcwLjU5Yy4wNiw0LjcxLjQxLDExLjIxLjQ4LDE1LjkyQzQuOTMsODMuMjYsMy4zNSw3NC44NywxLjc1LDcwLjU5WiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTAuMTQgLTUuOTcpIi8+PHBhdGggZD0iTTQ4LjQ4LDg3LjYzYy0xLTMuMjEtLjMzLTYuNTQtMS4wOC05Ljc0LS43Ny42LjA4LDEuNjktLjUxLDIuMjEuNDctMi4xMS0uMjItNC40LjM3LTYuNTlhNy4wOCw3LjA4LDAsMCwxLS40OC0yLjY4YzAtMy44MS0zLjM3LTYuMTMtNi41Ny00LjE4QTMyLjA1LDMyLjA1LDAsMCwwLDI1Ljc5LDg1LjU0Yy0uODUsMi45MywxLjM5LDUuMTQsNC40Nyw1LDIuNDktLjA3LDQuNDgtMS4yNiw2LjQxLTIuNzMsMy4wOC0yLjM1LDQuOC01Ljc1LDcuMTUtOC42N2EyOC41NywyOC41NywwLDAsMSwuMTUsOWMuMjMsMS41LDEsMi41OSwyLjYyLDIuMkEyLjM1LDIuMzUsMCwwLDAsNDguNDgsODcuNjNaTTQzLjE1LDcyLjM1Yy0uMjYsMy41MS03LjY1LDEyLjY4LTExLDEzLjUzLS42MS4xNi0xLjQyLjUzLTEuODQtLjEyYTIuMDcsMi4wNywwLDAsMSwuMTMtMS41OEEzNC4wNywzNC4wNywwLDAsMSw0MC40LDcwLjg5Yy41NC0uNDYsMS4yMi0xLDIuMDUtLjU3UzQzLjE3LDcxLjU4LDQzLjE1LDcyLjM1WiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTAuMTQgLTUuOTcpIi8+PC9zdmc+';
    }

    public getFormStack(): FormStack {
        const form = new Form(CoreFormsEnum.AUTHORIZATION_FORM, 'Authorization settings')
            .addField(new Field(FieldType.TEXT, USER, 'user', undefined, true))
            .addField(new Field(FieldType.TEXT, PASSWORD, 'password', undefined, true));

        return new FormStack().addForm(form);
    }

    public getRequestDto(
        dto: AProcessDto,
        applicationInstall: ApplicationInstall,
        method: HttpMethods,
        _url?: string,
        data?: unknown,
    ): RequestDto {
        const url = `https://go-balik.cz/api/v1/${_url}`;
        const request = new RequestDto(url, method, dto);
        request.setHeaders({
            [CommonHeaders.CONTENT_TYPE]: JSON_TYPE,
            [CommonHeaders.ACCEPT]: JSON_TYPE,
            [CommonHeaders.AUTHORIZATION]: encode(`${USER}:${PASSWORD}`),
        });

        if (data) {
            request.setJsonBody(data);
        }

        return request;
    }

}
